char display[8]={0x01,0x02,0x0a,0x07,0x00,0x00,0x00,0x00};
//const char TablaCC[16]={0x3F,0x06,0x5B,0x4F,0x66,0x6D,0x7D,0x07,0x7F,0x6F,0x77,0x7C,0x39,0x5E,0x79,0x71};
const char TablaCA[16]={0xC0,0xF9,0xA4,0xB0,0x99,0x92,0x82,0xF8,0x80,0x90,0x88,0x83,0xC6,0xA1,0x86,0x8E};
char barrido, i;
float ff1 = -3742;
char txt[15];


void desplegar(void){
     barrido=0x01;
     for (i=0;i<6;i++)
     {
         PORTC=0;
         PORTB=TablaCA[display[i]];
         PORTC=barrido;
         barrido=barrido<<1;
     }
}
void main() {
TRISB=0;
TRISC=0;
ANSELH=0;
PORTB=0;
PORTC=0;
while(1){
         desplegar();
         FloatToStr(ff1, txt);  // txt is "-374.2"
}
}